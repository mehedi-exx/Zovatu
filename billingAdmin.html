<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zovatu - Billing Admin</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="assets/icons/zovatu-icon.png">
  <style>
    /* Admin Panel Specific Styles */
    .admin-container {
      min-height: 100vh;
      background: #000;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 20px;
      background: #1a1a1a;
      border-radius: 15px;
      border: 2px solid #FFA500;
    }

    .admin-title {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #FFA500;
      font-size: 24px;
      font-weight: 700;
    }

    .back-btn {
      background: #4CAF50;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .back-btn:hover {
      background: #45a049;
      transform: translateY(-1px);
    }

    .shop-controls {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .shop-control-btn {
      padding: 15px 25px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 150px;
      justify-content: center;
    }

    .open-shop-btn {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: #fff;
      border: 2px solid #4CAF50;
    }

    .close-shop-btn {
      background: linear-gradient(135deg, #f44336, #d32f2f);
      color: #fff;
      border: 2px solid #f44336;
    }

    .shop-control-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .shop-control-btn:disabled {
      background: #555;
      border-color: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .admin-card {
      background: #1a1a1a;
      border-radius: 15px;
      padding: 25px;
      border: 2px solid #333;
      transition: all 0.3s ease;
    }

    .admin-card:hover {
      border-color: #FFA500;
      box-shadow: 0 5px 20px rgba(255, 165, 0, 0.2);
    }

    .card-title {
      color: #FFA500;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .stat-item {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      border: 1px solid #444;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: #4CAF50;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 12px;
      color: #888;
      text-transform: uppercase;
      font-weight: 600;
    }

    .filter-section {
      background: #2a2a2a;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #444;
    }

    .filter-title {
      color: #FFA500;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .filter-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 15px;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      color: #fff;
      font-size: 14px;
      font-weight: 600;
    }

    .filter-input {
      background: #1a1a1a;
      border: 2px solid #444;
      border-radius: 8px;
      padding: 12px;
      color: #fff;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .filter-input:focus {
      border-color: #FFA500;
      outline: none;
      box-shadow: 0 0 10px rgba(255, 165, 0, 0.3);
    }

    .filter-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .filter-btn {
      background: #4CAF50;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-btn:hover {
      background: #45a049;
      transform: translateY(-1px);
    }

    .filter-btn.secondary {
      background: #2196F3;
    }

    .filter-btn.secondary:hover {
      background: #1976D2;
    }

    .filter-btn.danger {
      background: #f44336;
    }

    .filter-btn.danger:hover {
      background: #d32f2f;
    }

    .history-section {
      background: #1a1a1a;
      border-radius: 15px;
      padding: 25px;
      border: 2px solid #333;
      margin-bottom: 20px;
    }

    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .history-title {
      color: #FFA500;
      font-size: 20px;
      font-weight: 700;
    }

    .print-history-btn {
      background: #FF9800;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .print-history-btn:hover {
      background: #F57C00;
      transform: translateY(-1px);
    }

    .history-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    .history-table th,
    .history-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #444;
    }

    .history-table th {
      background: #2a2a2a;
      color: #FFA500;
      font-weight: 600;
      font-size: 14px;
    }

    .history-table td {
      color: #fff;
      font-size: 13px;
    }

    .history-table tr:hover {
      background: #2a2a2a;
    }

    .no-data {
      text-align: center;
      color: #888;
      font-style: italic;
      padding: 40px;
    }

    .settings-section {
      background: #1a1a1a;
      border-radius: 15px;
      padding: 25px;
      border: 2px solid #333;
    }

    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .setting-group {
      background: #2a2a2a;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #444;
    }

    .setting-title {
      color: #FFA500;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .setting-item {
      margin-bottom: 15px;
    }

    .setting-label {
      display: block;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .setting-input {
      width: 100%;
      background: #1a1a1a;
      border: 2px solid #444;
      border-radius: 8px;
      padding: 12px;
      color: #fff;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .setting-input:focus {
      border-color: #FFA500;
      outline: none;
      box-shadow: 0 0 10px rgba(255, 165, 0, 0.3);
    }

    .setting-checkbox {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .setting-checkbox input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: #FFA500;
    }

    .save-btn {
      background: #4CAF50;
      color: #fff;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 20px;
    }

    .save-btn:hover {
      background: #45a049;
      transform: translateY(-1px);
    }

    .data-management {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .data-btn {
      background: #2196F3;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .data-btn:hover {
      background: #1976D2;
      transform: translateY(-1px);
    }

    .data-btn.export {
      background: #9C27B0;
    }

    .data-btn.export:hover {
      background: #7B1FA2;
    }

    .data-btn.import {
      background: #FF9800;
    }

    .data-btn.import:hover {
      background: #F57C00;
    }

    .data-btn.clear {
      background: #f44336;
    }

    .data-btn.clear:hover {
      background: #d32f2f;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      animation: fadeIn 0.3s ease;
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a;
      border-radius: 15px;
      padding: 30px;
      border: 2px solid #FFA500;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-title {
      color: #FFA500;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }

    .modal-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-btn.primary {
      background: #4CAF50;
      color: #fff;
    }

    .modal-btn.primary:hover {
      background: #45a049;
    }

    .modal-btn.secondary {
      background: #666;
      color: #fff;
    }

    .modal-btn.secondary:hover {
      background: #555;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .admin-container {
        padding: 10px;
      }

      .admin-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .admin-title {
        font-size: 20px;
      }

      .shop-controls {
        justify-content: center;
      }

      .shop-control-btn {
        min-width: 120px;
        padding: 12px 20px;
        font-size: 14px;
      }

      .admin-grid {
        grid-template-columns: 1fr;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .filter-controls {
        grid-template-columns: 1fr;
      }

      .filter-buttons {
        justify-content: center;
      }

      .history-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .history-table {
        font-size: 12px;
      }

      .history-table th,
      .history-table td {
        padding: 8px;
      }

      .settings-grid {
        grid-template-columns: 1fr;
      }

      .data-management {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .admin-card {
        padding: 15px;
      }

      .card-title {
        font-size: 18px;
      }

      .stat-value {
        font-size: 20px;
      }

      .filter-section {
        padding: 15px;
      }

      .history-section {
        padding: 15px;
      }

      .settings-section {
        padding: 15px;
      }

      .setting-group {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <!-- Header -->
    <div class="admin-header">
      <div class="admin-title">
        ⚙️ Billing Admin Panel
      </div>
      <a href="billingTool.html" class="back-btn">
        ← Back to Billing Tool
      </a>
    </div>

    <!-- Shop Controls -->
    <div class="shop-controls">
      <button class="shop-control-btn open-shop-btn" id="openShopBtn" onclick="openShop()">
        🏪 Open Shop
      </button>
      <button class="shop-control-btn close-shop-btn" id="closeShopBtn" onclick="closeShop()">
        🔒 Close Shop
      </button>
    </div>

    <!-- Admin Grid -->
    <div class="admin-grid">
      <!-- Sales Reports -->
      <div class="admin-card">
        <div class="card-title">📊 Sales Reports</div>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-value" id="todaySales">৳0.00</div>
            <div class="stat-label">Today's Sales</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="monthSales">৳0.00</div>
            <div class="stat-label">This Month's Sales</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="totalTransactions">0</div>
            <div class="stat-label">Total Transactions</div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="admin-card">
        <div class="card-title">⚡ Quick Actions</div>
        <div class="data-management">
          <button class="data-btn export" onclick="exportData()">
            📤 Export Data
          </button>
          <button class="data-btn import" onclick="importData()">
            📥 Import Data
          </button>
          <button class="data-btn" onclick="autoBackup()">
            💾 Auto Backup
          </button>
          <button class="data-btn clear" onclick="clearAllData()">
            🗑️ Clear Data
          </button>
        </div>
      </div>
    </div>

    <!-- Filter Sales History -->
    <div class="filter-section">
      <div class="filter-title">🔍 Filter Sales History</div>
      <div class="filter-controls">
        <div class="filter-group">
          <label class="filter-label">Filter Type:</label>
          <select class="filter-input" id="filterType" onchange="updateDateFilter()">
            <option value="daily">Daily</option>
            <option value="monthly">Monthly</option>
            <option value="yearly">Yearly</option>
            <option value="custom">Custom Range</option>
          </select>
        </div>
        <div class="filter-group" id="dateGroup">
          <label class="filter-label">Select Date:</label>
          <input type="date" class="filter-input" id="filterDate">
        </div>
        <div class="filter-group" id="monthGroup" style="display: none;">
          <label class="filter-label">Select Month:</label>
          <input type="month" class="filter-input" id="filterMonth">
        </div>
        <div class="filter-group" id="yearGroup" style="display: none;">
          <label class="filter-label">Select Year:</label>
          <input type="number" class="filter-input" id="filterYear" min="2020" max="2030">
        </div>
        <div class="filter-group" id="startDateGroup" style="display: none;">
          <label class="filter-label">Start Date:</label>
          <input type="date" class="filter-input" id="startDate">
        </div>
        <div class="filter-group" id="endDateGroup" style="display: none;">
          <label class="filter-label">End Date:</label>
          <input type="date" class="filter-input" id="endDate">
        </div>
      </div>
      <div class="filter-buttons">
        <button class="filter-btn" onclick="applyFilter()">
          🔍 Apply Filter
        </button>
        <button class="filter-btn secondary" onclick="resetFilter()">
          🔄 Reset Filter
        </button>
        <button class="filter-btn danger" onclick="printFilteredHistory()">
          🖨️ Print History
        </button>
      </div>
    </div>

    <!-- Sales History -->
    <div class="history-section">
      <div class="history-header">
        <div class="history-title">📋 Sales History</div>
        <button class="print-history-btn" onclick="printAllHistory()">
          🖨️ Print All History
        </button>
      </div>
      <div id="historyContent">
        <div class="no-data">No sales data found for the selected period.</div>
      </div>
    </div>

    <!-- Shop Information & Print Settings -->
    <div class="settings-section">
      <div class="card-title">🏪 Shop Information & Print Settings</div>
      <div class="settings-grid">
        <div class="setting-group">
          <div class="setting-title">Shop Details</div>
          <div class="setting-item">
            <label class="setting-label">Shop Name:</label>
            <input type="text" class="setting-input" id="shopName" placeholder="Enter shop name">
          </div>
          <div class="setting-item">
            <label class="setting-label">Shop Address:</label>
            <textarea class="setting-input" id="shopAddress" rows="3" placeholder="Enter shop address"></textarea>
          </div>
          <div class="setting-item">
            <label class="setting-label">Phone Number:</label>
            <input type="tel" class="setting-input" id="shopPhone" placeholder="Enter phone number">
          </div>
          <div class="setting-item">
            <label class="setting-label">Email Address:</label>
            <input type="email" class="setting-input" id="shopEmail" placeholder="Enter email address">
          </div>
          <button class="save-btn" onclick="saveShopDetails()">
            💾 Save Shop Details
          </button>
        </div>

        <div class="setting-group">
          <div class="setting-title">Print Settings</div>
          <div class="setting-checkbox">
            <input type="checkbox" id="enablePrint">
            <label for="enablePrint">Enable Print Option</label>
          </div>
          <div class="setting-item">
            <label class="setting-label">Default Print Design:</label>
            <select class="setting-input" id="defaultPrintDesign">
              <option value="default">Default</option>
              <option value="modern">Modern</option>
              <option value="minimal">Minimal</option>
            </select>
          </div>
          <div class="setting-item">
            <label class="setting-label">Default Paper Size:</label>
            <select class="setting-input" id="defaultPaperSize">
              <option value="thermal">Thermal (58mm)</option>
              <option value="a4">A4</option>
              <option value="letter">Letter</option>
            </select>
          </div>
          <button class="save-btn" onclick="savePrintSettings()">
            🖨️ Save Print Settings
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal" id="confirmModal">
    <div class="modal-content">
      <div class="modal-title" id="confirmTitle">Confirm Action</div>
      <div id="confirmMessage">Are you sure you want to proceed?</div>
      <div class="modal-buttons">
        <button class="modal-btn primary" id="confirmYes">Yes</button>
        <button class="modal-btn secondary" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Shop Details Modal -->
  <div class="modal" id="shopDetailsModal">
    <div class="modal-content">
      <div class="modal-title">🏪 Edit Shop Details</div>
      <div class="setting-item">
        <label class="setting-label">Shop Name:</label>
        <input type="text" class="setting-input" id="modalShopName" placeholder="Enter shop name">
      </div>
      <div class="setting-item">
        <label class="setting-label">Shop Address:</label>
        <textarea class="setting-input" id="modalShopAddress" rows="3" placeholder="Enter shop address"></textarea>
      </div>
      <div class="setting-item">
        <label class="setting-label">Phone Number:</label>
        <input type="tel" class="setting-input" id="modalShopPhone" placeholder="Enter phone number">
      </div>
      <div class="setting-item">
        <label class="setting-label">Email Address:</label>
        <input type="email" class="setting-input" id="modalShopEmail" placeholder="Enter email address">
      </div>
      <div class="modal-buttons">
        <button class="modal-btn primary" onclick="saveModalShopDetails()">💾 Save</button>
        <button class="modal-btn secondary" onclick="closeShopDetailsModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script src="js/billingAdmin.js"></script>
</body>
</html>

